{"version":3,"sources":["components/comparison/components/comparison.component.ts"],"names":[],"mappings":"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","file":"comparison.component.js","sourcesContent":["import { Component, ViewChild, ElementRef, ChangeDetectionStrategy, ChangeDetectorRef } from '@angular/core';\n\nimport { Data, CriteriaSelection, Criteria, TableData } from '../shared/index';\n\nimport { ComparisonConfigService } from './comparison-config.service';\nimport { ComparisonDataService } from './comparison-data.service';\nimport { ComparisonService } from './comparison.service';\nimport { ComparisonCitationService } from './comparison-citation.service';\n\nvar FileSaver = require('file-saver');\n\n@Component({\n    selector: 'comparison',\n    templateUrl: '../templates/comparison.template.html',\n    styleUrls: ['../styles/comparison.component.css'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    moduleId: module.id\n})\nexport class ComparisonComponent {\n    criteriaSelection = [];\n    private query: {[name: string]: CriteriaSelection;} = { };\n    private order: Array<String> = new Array<String>(3);\n    private orderOption: Array<number> = new Array<number>(3);\n    private ctrlCounter:number = 0;\n     \n    constructor(\n            public serv: ComparisonService,\n            public dataServ: ComparisonDataService,\n            public confServ: ComparisonConfigService,\n            public citationServ: ComparisonCitationService,\n            private cd: ChangeDetectorRef\n        ){\n        this.confServ.loadComparison(this.cd);\n        this.confServ.loadCriteria(this.cd);\n        this.confServ.loadTableData(this.cd);\n        this.confServ.loadDescription(this.cd);\n        this.citationServ.loadCitationData(this.cd);\n        \n        this.order[0] = this.order[1] = this.order[2] = \"tag\";\n        this.orderOption[0] = 1;\n        this.orderOption[1] = this.orderOption[2] = 0;\n    } \n    \n    private criteriaChanged(value:Array<String>, crit:Criteria ){\n        if (value){\n            this.query[crit.tag] = new CriteriaSelection(value,crit);\n        }\n        this.cd.markForCheck();\n    }\n    \n    private orderChanged(value:String, pos:number){\n        if(this.order.length > pos){\n            this.order[pos] = value;\n        }\n        this.cd.markForCheck();\n    }\n    private orderOptionChanged(value:number, pos:number){\n        if(this.orderOption.length > pos){\n            this.orderOption[pos] = value;\n        }\n        this.cd.markForCheck();\n    }\n    \n    private orderClick(e:MouseEvent, value:string){\n        let pos:number = this.order.findIndex(name => name == value);\n        if(e.ctrlKey){\n            this.ctrlCounter = this.order[this.ctrlCounter] == value ? this.ctrlCounter: this.ctrlCounter + 1;\n        } else {\n            this.ctrlCounter = 0;\n        }\n        if(typeof pos != 'undefined' && pos >= 0){\n            this.order[this.ctrlCounter] = value;\n            this.orderOption[this.ctrlCounter] = this.orderOption[pos] == 1? -1: 1;\n            this.orderOption[pos] = pos != this.ctrlCounter? 0 : this.orderOption[this.ctrlCounter];\n        } else {\n            this.order[this.ctrlCounter] = value;\n            this.orderOption[this.ctrlCounter] = 1;\n        }\n        if (this.ctrlCounter == 0){\n            for (let i = 1; i < this.orderOption.length; i++) {\n                this.orderOption[i] = 0;\n            } \n        }\n        this.cd.markForCheck();\n    }\n    \n    private displayOrder(value:string, option:number): boolean{\n        return this.order.findIndex(val => val == value) >= 0 && this.orderOption[this.order.findIndex(val => val == value)] == option;\n    }\n    \n    @ViewChild('details') detailsModal: any;\n    private activeRow: Data = new Data();\n    private showDetails(data:Data){\n        this.activeRow = data;\n        this.detailsModal.open();\n    }\n    \n    @ViewChild('settings') settingsModal: any;\n    private showTableProperties(){\n        this.settingsModal.open();\n    }\n    \n    @ViewChild('latextable') latexTable: ElementRef;\n    private downloadLatexTable(){\n        let content:string = this.latexTable.nativeElement.textContent;\n        content = content.substr(content.indexOf('%'), content.length);\n        let blob: Blob = new Blob([content], {type: 'plain/text'});\n        FileSaver(blob, \"latextable.tex\"); \n        return window.URL.createObjectURL(blob);\n    }\n    \n    private showTable: boolean = false;\n    private previewLatexTable(show){\n        if (show){\n            this.latexTable.nativeElement.classList.remove(\"ltable\");    \n        } else {\n            this.latexTable.nativeElement.classList.add(\"ltable\");\n        }\n    }\n}\n"]}